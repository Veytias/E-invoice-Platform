{"ast":null,"code":"import _slicedToArray from\"C:/Users/barry/Desktop/SENG2021/h18abrowniefrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"C:/Users/barry/Desktop/SENG2021/h18abrowniefrontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"setCredentials\"];import React from'react';import'./wrapper.css';import axios from'axios';import{Box,Button,Container,Grid,Link,TextField,Typography}from'@material-ui/core';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var setCredentials=_ref.setCredentials,props=_objectWithoutProperties(_ref,_excluded);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),error=_React$useState4[0],setError=_React$useState4[1];// const [error, setError]\nfunction handleSubmit(event){event.preventDefault();var email=event.target[0].value;var password=event.target[2].value;if(!email||!password)return;// setLoading(true);\naxios.post(\"https://h18abrownie.herokuapp.com/auth/login\",{email:email,password:password}).then(function(response){console.log(response);setCredentials(response.data);props.history.push('/dashboard');}).catch(function(err){setError(\"Login failed. Please try again!\");}).finally(function(){return setLoading(false);});}return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"sm\",children:/*#__PURE__*/_jsxs(Box,{boxShadow:1,children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h2\",children:\"Login\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsx(\"p\",{children:error})}):/*#__PURE__*/_jsxs(\"form\",{noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email\",name:\"email\",type:\"text\",autoFocus:true}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:error?/*#__PURE__*/_jsx(\"p\",{children:error}):null}),/*#__PURE__*/_jsx(Grid,{container:true,direction:\"column\",alignItems:\"center\",children:/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{href:\"/register\",variant:\"body1\",children:\"Don't have an account? Register\"})]})})]})]})});}export default Login;","map":{"version":3,"sources":["C:/Users/barry/Desktop/SENG2021/h18abrowniefrontend/src/pages/Login.js"],"names":["React","axios","Box","Button","Container","Grid","Link","TextField","Typography","Login","setCredentials","props","useState","loading","setLoading","error","setError","handleSubmit","event","preventDefault","email","target","value","password","post","then","response","console","log","data","history","push","catch","err","finally"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './wrapper.css';\r\nimport PropTypes from 'prop-types';\r\nimport axios from 'axios';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Container,\r\n  Grid,\r\n  Link,\r\n  TextField,\r\n  Typography,\r\n} from '@material-ui/core';\r\n\r\n\r\nfunction Login({ setCredentials, ...props }) {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState();\r\n  // const [error, setError]\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    const email = event.target[0].value;\r\n    const password = event.target[2].value;\r\n    if (!email || !password ) return;\r\n\r\n    // setLoading(true);\r\n  \r\n    axios.post(`https://h18abrownie.herokuapp.com/auth/login`, { email, password })\r\n      .then((response) => {\r\n        console.log(response);\r\n        setCredentials(response.data);\r\n        props.history.push('/dashboard');\r\n      })\r\n      .catch((err) => { setError(\"Login failed. Please try again!\"); })\r\n      .finally(() => setLoading(false));\r\n  }\r\n\r\n  return(\r\n    <Container component=\"main\" maxWidth=\"sm\">\r\n      <Box boxShadow={1}>\r\n        <Typography component=\"h1\" variant=\"h2\">\r\n          Login\r\n        </Typography>\r\n        {\r\n          loading\r\n            ? <div className=\"wrapper\">{<p>{error}</p>}</div>\r\n            : <form noValidate onSubmit={handleSubmit}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                type=\"text\"\r\n                autoFocus\r\n              />\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n              />\r\n             \r\n              <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\r\n                Sign In\r\n                </Button>\r\n                <div className=\"loading\">{error ? <p>{error}</p> : null}</div>\r\n              <Grid container direction=\"column\" alignItems=\"center\">\r\n                <Grid item>\r\n                  <br />\r\n                  <Link href=\"/register\" variant=\"body1\">\r\n                    {\"Don't have an account? Register\"}\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n        }\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\nexport default Login;\r\n\r\nLogin.propTypes = {\r\n  setCredentials: PropTypes.func.isRequired\r\n}\r\n \r\n"]},"metadata":{},"sourceType":"module"}