{"ast":null,"code":"import _slicedToArray from\"C:/Users/barry/Desktop/SENG2021/h18abrowniefrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./wrapper.css';import axios from'axios';import'./wrapper.css';import Credentials from'../Credentials';import{Box,Button,Container,TextField,Typography}from'@material-ui/core';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function InvoiceEmailReceive(){var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),report=_React$useState2[0],setReport=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),error=_React$useState4[0],setError=_React$useState4[1];var tmp=React.useContext(Credentials);function handleSubmit(event){event.preventDefault();var report_type=event.target[0].value;if(!report_type)return;var formData=new FormData();var token=tmp.replace(/['\"]+/g,'');axios.post(\"https://h18abrownie.herokuapp.com/invoice/upload/IMAP\",{token:token,report_type:report_type}).then(function(response){console.log(response.data);if(response.data===null){setReport(\"No new invoices received!\");}else{setReport(JSON.stringify(response.data));}}).catch(function(err){setError(\"An error has occurred. Please try again!\");console.log(err);});}return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"lg\",children:/*#__PURE__*/_jsxs(Box,{boxShadow:1,children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h2\",children:\"Receive email\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"report_type\",name:\"Report Type\",label:\"Report Type\",type:\"text\",autoFocus:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"report\",children:report?/*#__PURE__*/_jsx(\"p\",{children:report}):/*#__PURE__*/_jsxs(\"p\",{children:[error,\" \"]})})]})]})});}export default InvoiceEmailReceive;// UploadInvoice.propTypes = {\n//   setSelectedFile: PropTypes.func.isRequired\n// }","map":{"version":3,"sources":["C:/Users/barry/Desktop/SENG2021/h18abrowniefrontend/src/pages/invoiceEmailReceive.js"],"names":["React","useState","axios","Credentials","Box","Button","Container","TextField","Typography","InvoiceEmailReceive","report","setReport","error","setError","tmp","useContext","handleSubmit","event","preventDefault","report_type","target","value","formData","FormData","token","replace","post","then","response","console","log","data","JSON","stringify","catch","err"],"mappings":"yIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAO,eAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,eAAP,CAEA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CACA,OACEC,GADF,CAEEC,MAFF,CAGEC,SAHF,CAIEC,SAJF,CAKEC,UALF,KAMO,mBANP,C,wFAQA,QAASC,CAAAA,mBAAT,EAA+B,CAC7B,oBAA4BT,KAAK,CAACC,QAAN,EAA5B,oDAAOS,MAAP,qBAAeC,SAAf,qBACA,qBAA0BX,KAAK,CAACC,QAAN,EAA1B,qDAAOW,KAAP,qBAAcC,QAAd,qBAEA,GAAMC,CAAAA,GAAG,CAAGd,KAAK,CAACe,UAAN,CAAiBZ,WAAjB,CAAZ,CAEA,QAASa,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CAC3BA,KAAK,CAACC,cAAN,GAEA,GAAMC,CAAAA,WAAW,CAAGF,KAAK,CAACG,MAAN,CAAa,CAAb,EAAgBC,KAApC,CACA,GAAI,CAACF,WAAL,CAAkB,OAElB,GAAMG,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACA,GAAMC,CAAAA,KAAK,CAAGV,GAAG,CAACW,OAAJ,CAAY,QAAZ,CAAsB,EAAtB,CAAd,CAEAvB,KAAK,CAACwB,IAAN,yDAAoE,CAAEF,KAAK,CAALA,KAAF,CAASL,WAAW,CAAXA,WAAT,CAApE,EACCQ,IADD,CACM,SAACC,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EACA,GAAIH,QAAQ,CAACG,IAAT,GAAkB,IAAtB,CAA4B,CAC1BpB,SAAS,CAAC,2BAAD,CAAT,CACD,CAFD,IAEO,CACLA,SAAS,CAACqB,IAAI,CAACC,SAAL,CAAeL,QAAQ,CAACG,IAAxB,CAAD,CAAT,CACD,CACF,CARD,EASCG,KATD,CASO,SAACC,GAAD,CAAS,CACdtB,QAAQ,CAAC,0CAAD,CAAR,CACAgB,OAAO,CAACC,GAAR,CAAYK,GAAZ,EACD,CAZD,EAaD,CAED,mBACE,KAAC,SAAD,EAAW,SAAS,CAAC,MAArB,CAA4B,QAAQ,CAAC,IAArC,uBACE,MAAC,GAAD,EAAK,SAAS,CAAE,CAAhB,wBACE,KAAC,UAAD,EAAY,SAAS,CAAC,IAAtB,CAA2B,OAAO,CAAC,IAAnC,2BADF,cAKI,cAAM,QAAQ,CAAEnB,YAAhB,wBACE,KAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,MAAM,CAAC,QAFT,CAGE,QAAQ,KAHV,CAIE,SAAS,KAJX,CAKE,EAAE,CAAC,aALL,CAME,IAAI,CAAC,aANP,CAOE,KAAK,CAAC,aAPR,CAQE,IAAI,CAAC,MARP,CASE,SAAS,KATX,EADF,cAYE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,KAA/B,CAAgC,OAAO,CAAC,WAAxC,CAAoD,KAAK,CAAC,SAA1D,oBAZF,cAeE,YAAK,SAAS,CAAC,QAAf,UAAyBN,MAAM,cAAG,mBAAIA,MAAJ,EAAH,cAAqB,qBAAIE,KAAJ,OAApD,EAfF,GALJ,GADF,EADF,CA8BD,CAED,cAAeH,CAAAA,mBAAf,CACA;AACA;AACA","sourcesContent":["import React, { useState } from 'react';\r\nimport './wrapper.css';\r\nimport axios from 'axios';\r\nimport './wrapper.css';\r\n\r\nimport Credentials from '../Credentials';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Container,\r\n  TextField,\r\n  Typography,\r\n} from '@material-ui/core';\r\n\r\nfunction InvoiceEmailReceive() {\r\n  const [report, setReport] = React.useState();\r\n  const [error, setError] = React.useState();\r\n\r\n  const tmp = React.useContext(Credentials);\r\n  \r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    const report_type = event.target[0].value;\r\n    if (!report_type) return;\r\n\r\n    const formData = new FormData();\r\n    const token = tmp.replace(/['\"]+/g, '');\r\n\r\n    axios.post(`https://h18abrownie.herokuapp.com/invoice/upload/IMAP`, { token, report_type })\r\n    .then((response) => {\r\n      console.log(response.data);\r\n      if (response.data === null) {\r\n        setReport(\"No new invoices received!\");\r\n      } else {\r\n        setReport(JSON.stringify(response.data));\r\n      }\r\n    })\r\n    .catch((err) => { \r\n      setError(\"An error has occurred. Please try again!\");\r\n      console.log(err);\r\n    });\r\n  } \r\n\r\n  return(\r\n    <Container component=\"main\" maxWidth=\"lg\">\r\n      <Box boxShadow={1}>\r\n        <Typography component=\"h1\" variant=\"h2\">\r\n          Receive email\r\n        </Typography>\r\n        {\r\n          <form onSubmit={handleSubmit}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"report_type\"\r\n              name=\"Report Type\"\r\n              label=\"Report Type\"\r\n              type=\"text\"\r\n              autoFocus \r\n            />\r\n            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\r\n            Submit\r\n            </Button>\r\n            <div className=\"report\">{report ? <p>{report}</p> : <p>{error} </p>}</div>\r\n          </form>\r\n\r\n            \r\n        }\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default InvoiceEmailReceive;\r\n// UploadInvoice.propTypes = {\r\n//   setSelectedFile: PropTypes.func.isRequired\r\n// }\r\n\r\n"]},"metadata":{},"sourceType":"module"}